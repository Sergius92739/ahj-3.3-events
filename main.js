(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.gallery=e}var r,n,o;return r=t,o=[{key:"template",value:function(){return'<div class="row__item">\n              <div class="absolute">\n                <button class="row-item__delete">X</button>\n              </div>\n            </div>'}}],(n=[{key:"toLoad",value:function(){this.gallery.insertAdjacentHTML("beforeend",t.template())}},{key:"toDelete",value:function(){this.gallery.addEventListener("click",(function(e){"row-item__delete"===e.target.className&&e.target.closest(".row__item").remove()}))}}])&&e(r.prototype,n),o&&e(r,o),t}();function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.src=t,this.alt=r}var t,n,o;return t=e,(n=[{key:"toCreat",value:function(){var e=document.createElement("img");return e.src=this.src,e.alt=this.alt,e.className="row-item__img",e}}])&&r(t.prototype,n),o&&r(t,o),e}();function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.forms.gallery_form,this.alt=this.form.elements.img_name,this.src=this.form.elements.img_link,this.button=this.form.elements.form_button,this.errorName=this.alt.nextElementSibling,this.errorURL=this.src.nextElementSibling,this.images=new t(document.querySelector(".gallery__row.row")),this.img=null,this.timerID=null}var r,i,a;return r=e,(i=[{key:"toAppoint",value:function(){var e=this;this.form.addEventListener("submit",(function(t){if(t.preventDefault(),e.alt.value||e.src.value)if(e.alt.value){e.img=new n(e.src.value,e.alt.value);var r=e.img.toCreat();r.onload=function(){e.images.toLoad(),e.images.gallery.lastElementChild.querySelector(".absolute").append(r),e.form.reset()},r.onerror=function(){e.showErrorMes(e.errorURL,"Неверный URL изображения")}}else e.showErrorMes(e.errorName,"Заполните пожалуйста это поле");else e.showErrorMes(e.errorURL,"Заполните пожалуйста все поля формы")}))}},{key:"showErrorMes",value:function(e,t){var r=this;this.getErrorMes(e,t),this.timerID=setTimeout((function(){r.removeErrorMes(e),r.timerID=null}),3e3)}},{key:"getErrorMes",value:function(e,t){this.element=e,this.element.textContent=t,this.element.classList.remove("d_none")}},{key:"removeErrorMes",value:function(e){this.element=e,this.element.textContent="",this.element.className="error__mes d_none"}}])&&o(r.prototype,i),a&&o(r,a),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.formHandler=new i}var t,r,n;return t=e,(r=[{key:"init",value:function(){this.formHandler.toAppoint(),this.formHandler.images.toDelete()}}])&&a(t.prototype,r),n&&a(t,n),e}())).init()})();